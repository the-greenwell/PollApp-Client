{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nexport const useForm = options => {\n  _s();\n\n  const [data, setData] = useState((options === null || options === void 0 ? void 0 : options.initialValues) || {});\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (key, sanitizeFn) => e => {\n    const value = sanitizeFn ? sanitizeFn(e.target.value) : e.target.value;\n    setData({ ...data,\n      [key]: value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const validations = options === null || options === void 0 ? void 0 : options.validations;\n\n    if (validations) {\n      let valid = true;\n      const newErrors = {};\n\n      for (const key in validations) {\n        var _validation$required;\n\n        const value = data[key];\n        const validation = validations[key];\n        const pollOpt = value.split('-')[0];\n\n        if (validation !== null && validation !== void 0 && (_validation$required = validation.required) !== null && _validation$required !== void 0 && _validation$required.value && !value) {\n          var _validation$required2;\n\n          valid = false;\n          newErrors[key] = validation === null || validation === void 0 ? void 0 : (_validation$required2 = validation.required) === null || _validation$required2 === void 0 ? void 0 : _validation$required2.message;\n        }\n\n        const pattern = validation === null || validation === void 0 ? void 0 : validation.pattern;\n\n        if (pattern !== null && pattern !== void 0 && pattern.value && !RegExp(pattern.value).test(value)) {\n          valid = false;\n          newErrors[key] = pattern.message;\n        }\n\n        const custom = validation === null || validation === void 0 ? void 0 : validation.custom;\n\n        if (custom !== null && custom !== void 0 && custom.value && !custom.isValid(value)) {\n          valid = false;\n          newErrors[key] = custom.message;\n        }\n      }\n\n      if (!valid) {\n        setErrors(newErrors);\n        return;\n      }\n    }\n\n    setErrors({});\n\n    if (options !== null && options !== void 0 && options.onSubmit) {\n      options.onSubmit();\n    }\n  };\n\n  useEffect(() => {\n    console.log(data);\n  }, [data]);\n  return {\n    data,\n    handleChange,\n    handleSubmit,\n    errors\n  };\n};\n\n_s(useForm, \"C727K+Z1dpmEg2zPkYyAQIFvwHc=\");","map":{"version":3,"sources":["/Users/anthonyg/Desktop/vote_share/client/src/useForm.js"],"names":["useState","useEffect","useForm","options","data","setData","initialValues","errors","setErrors","handleChange","key","sanitizeFn","e","value","target","handleSubmit","preventDefault","validations","valid","newErrors","validation","pollOpt","split","required","message","pattern","RegExp","test","custom","isValid","onSubmit","console","log"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\n\nexport const useForm = (options) => {\n  const [data, setData] = useState(options?.initialValues || {});\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (\n    key,\n    sanitizeFn,\n  ) => (e) => {\n    const value = sanitizeFn ? sanitizeFn(e.target.value) : e.target.value;\n    setData({\n      ...data,\n      [key]: value,\n    });\n  };\n\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const validations = options?.validations;\n    if(validations){\n      let valid = true;\n      const newErrors = {};\n      for (const key in validations) {\n        const value = data[key];\n        const validation = validations[key];\n        const pollOpt = value.split('-')[0];\n\n        if(validation?.required?.value && !value) {\n          valid = false;\n          newErrors[key] = validation?.required?.message;\n        }\n\n        const pattern = validation?.pattern;\n        if(pattern?.value && !RegExp(pattern.value).test(value)){\n          valid = false;\n          newErrors[key] = pattern.message;\n        }\n\n        const custom = validation?.custom;\n        if(custom?.value && !custom.isValid(value)){\n          valid = false;\n          newErrors[key] = custom.message;\n        }\n      }\n\n      if(!valid) {\n        setErrors(newErrors);\n        return\n      }\n    }\n\n    setErrors({});\n\n    if(options?.onSubmit) {\n      options.onSubmit();\n    }\n  }\n\n  useEffect(()=>{console.log(data)},[data])\n\n  return {\n    data,\n    handleChange,\n    handleSubmit,\n    errors\n  }\n};\n"]},"metadata":{},"sourceType":"module"}